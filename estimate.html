<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get an Estimate | Mobile Tyre Fitting London</title>
  <meta name="description" content="Get a free estimate for mobile tyre fitting, puncture repair and related services. Pay a 20% deposit securely with card to confirm your booking.">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#18181b">
  <link rel="canonical" href="https://no5tyreandmot.co.uk/mobile-tyre/estimate.html">
  <link rel="icon" type="image/png" href="https://no5tyreandmot.co.uk/wp-content/uploads/2026/02/Car-Service-Logo-with-Wrench-and-Tyre-Icon-370-x-105-px.png" sizes="any">
  <link rel="apple-touch-icon" href="https://no5tyreandmot.co.uk/wp-content/uploads/2026/02/Car-Service-Logo-with-Wrench-and-Tyre-Icon-370-x-105-px.png" sizes="180x180">
  <link rel="stylesheet" href="styles.css">
  <script>
    (function(){var t=localStorage.getItem('theme');if(t==='light')document.documentElement.setAttribute('data-theme','light');else document.documentElement.removeAttribute('data-theme');})();
  </script>
  <script src="analytics.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { theme: { extend: { colors: { safety: '#fede00' } } } };</script>
</head>
<body class="bg-zinc-900 text-zinc-200 antialiased min-h-screen">
  <header class="sticky top-0 z-50 bg-zinc-900 border-b border-zinc-700 shadow-lg">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 flex items-center justify-between h-14 sm:h-16 gap-3 md:gap-4">
      <a href="index.html" class="flex items-center shrink-0 min-w-0">
        <img src="https://no5tyreandmot.co.uk/wp-content/uploads/2026/02/Car-Service-Logo-with-Wrench-and-Tyre-Icon-370-x-105-px.png" alt="No 5 Tyre and MOT logo" class="h-8 sm:h-9 w-auto object-contain max-h-9" loading="lazy">
      </a>
      <nav class="nav-desktop" aria-label="Main">
        <a href="index.html" class="px-3 py-2 rounded-lg text-zinc-200 font-medium hover:bg-zinc-800 hover:text-white focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900">Home</a>
        <a href="services.html" class="px-3 py-2 rounded-lg text-zinc-200 font-medium hover:bg-zinc-800 hover:text-white focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900">Services</a>
        <a href="blog.html" class="px-3 py-2 rounded-lg text-zinc-200 font-medium hover:bg-zinc-800 hover:text-white focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900">Blog</a>
        <a href="check-vehicle.html" class="px-3 py-2 rounded-lg text-zinc-200 font-medium hover:bg-zinc-800 hover:text-white focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900">Check vehicle</a>
        <a href="estimate.html" class="px-3 py-2 rounded-lg text-safety font-medium bg-zinc-800">Estimate</a>
        <a href="contact.html" class="px-3 py-2 rounded-lg text-zinc-200 font-medium hover:bg-zinc-800 hover:text-white focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900">Contact</a>
      </nav>
      <div class="flex items-center gap-2 shrink-0">
        <button type="button" id="theme-toggle" class="p-2 rounded-lg text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200 focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900 transition-colors tap-highlight-none" aria-label="Switch to light theme">
          <svg class="w-5 h-5 theme-icon-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg class="w-5 h-5 theme-icon-light hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
        <a href="tel:07895859505" data-track="call" class="inline-flex items-center justify-center gap-2 bg-safety text-zinc-900 font-bold text-sm sm:text-base px-3 sm:px-6 py-2.5 sm:py-3 rounded-lg hover:bg-[#e5c900] focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900 tap-highlight-none transition-colors">
          <svg class="w-5 h-5 shrink-0 hidden sm:block" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
          CALL 07895 859505
        </a>
        <button type="button" class="nav-mobile-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="nav-mobile-panel" id="nav-mobile-toggle">
          <svg class="w-6 h-6 nav-menu-icon-open" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <svg class="w-6 h-6 nav-menu-icon-close hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
    </div>
    <div id="nav-mobile-panel" class="nav-mobile-panel" aria-hidden="true">
      <nav class="flex flex-col p-4 gap-1" aria-label="Mobile">
        <a href="index.html" class="nav-mobile-link">Home</a>
        <a href="services.html" class="nav-mobile-link">Services</a>
        <a href="blog.html" class="nav-mobile-link">Blog</a>
        <a href="check-vehicle.html" class="nav-mobile-link">Check vehicle</a>
        <a href="estimate.html" class="nav-mobile-link">Estimate</a>
        <a href="contact.html" class="nav-mobile-link">Contact</a>
        <div class="border-t border-zinc-700 my-3"></div>
        <a href="tel:07895859505" data-track="call" class="nav-mobile-link inline-flex items-center gap-2">
          <svg class="w-5 h-5 shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
          Call 07895 859505
        </a>
      </nav>
    </div>
  </header>

  <main class="max-w-3xl mx-auto px-4 sm:px-6 py-10 sm:py-14">
    <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2 flex items-center gap-3">
      <span class="flex items-center justify-center w-10 h-10 rounded-lg bg-zinc-800 text-safety" aria-hidden="true">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
      </span>
      Estimate &amp; pay deposit
    </h1>
    <p class="text-zinc-400 text-sm sm:text-base mb-8">Build your estimate below. A 20% deposit secures your booking and is taken securely via Stripe. The remaining balance is paid when we complete the job.</p>

    <p id="canceled-msg" class="hidden mb-6 px-4 py-3 rounded-lg bg-amber-500/20 border border-amber-500/50 text-amber-200 text-sm">Payment was canceled. You can try again below or call us to pay by phone.</p>

    <!-- Vehicle -->
    <div class="rounded-xl border border-zinc-700 bg-zinc-800/50 p-6 mb-8">
      <h2 class="text-lg font-semibold text-white mb-4">Vehicle</h2>
      <p class="text-zinc-400 text-sm mb-4">Enter your registration and vehicle details manually. Add make, model and tyre size if you know them.</p>
      <div class="vrm-plate-wrap">
        <span class="vrm-label flex items-center justify-center gap-1.5">
          <svg class="w-4 h-4 text-safety" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM5 11l1.5-4.5h11L19 11H5z"/></svg>
          Vehicle registration (plate)
        </span>
        <div class="vrm-plate-container">
          <div class="vrm-plate-gb" aria-hidden="true">
            <svg class="vrm-gb-svg" viewBox="0 0 52 112" xmlns="http://www.w3.org/2000/svg">
              <rect width="52" height="112" fill="#003399" rx="2"/>
              <g fill="#FFD700" transform="translate(26,36)">
                <circle r="2.5" cx="0" cy="-12"/><circle r="2.5" cx="0" cy="12"/><circle r="2.5" cx="-10.4" cy="-6"/><circle r="2.5" cx="10.4" cy="-6"/><circle r="2.5" cx="-10.4" cy="6"/><circle r="2.5" cx="10.4" cy="6"/><circle r="2.5" cx="-12" cy="0"/><circle r="2.5" cx="12" cy="0"/><circle r="2.5" cx="-6" cy="-10.4"/><circle r="2.5" cx="6" cy="-10.4"/><circle r="2.5" cx="-6" cy="10.4"/><circle r="2.5" cx="6" cy="10.4"/>
              </g>
              <text x="26" y="88" text-anchor="middle" fill="white" font-family="Arial,sans-serif" font-weight="bold" font-size="22">GB</text>
            </svg>
          </div>
          <label for="estimate-vrm" class="sr-only">VRM (vehicle registration)</label>
          <input
            id="estimate-vrm"
            type="text"
            name="vrm"
            placeholder="AB12 CDE"
            maxlength="8"
            minlength="2"
            pattern="[A-Za-z0-9 ]{2,8}"
            title="UK plate: 2–8 characters, letters and numbers only (e.g. AB12 CDE)"
            class="vrm-plate-input"
            autocomplete="off"
            inputmode="text"
          />
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-4">
        <label for="estimate-car-make" class="sr-only">Car make</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/></svg>
          </span>
          <input id="estimate-car-make" type="text" name="car_make" placeholder="Make (e.g. Ford)" class="px-4 py-3.5 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-0 text-base" autocomplete="off">
        </div>
        <label for="estimate-car-model" class="sr-only">Car model</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/></svg>
          </span>
          <input id="estimate-car-model" type="text" name="car_model" placeholder="Model (e.g. Focus)" class="px-4 py-3.5 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-0 text-base" autocomplete="off">
        </div>
        <label for="estimate-wheels" class="sr-only">Number of wheels/tyres</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L9 8H3v2h5l2 5-2 5h2l1-3h4l1 3h2l-2-5 2-5h5V8h-6l-3-6zm-1.5 11L12 7l1.5 6h-3z"/></svg>
          </span>
          <select id="estimate-wheels" name="wheels" class="px-4 py-3.5 text-zinc-100 focus:outline-none focus:ring-0 text-base" aria-label="How many wheels (tyres) to fit">
            <option value="">Wheels (tyres)</option>
            <option value="1">1 tyre</option>
            <option value="2" selected>2 tyres</option>
            <option value="3">3 tyres</option>
            <option value="4">4 tyres</option>
          </select>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3">
        <label for="estimate-colour" class="sr-only">Vehicle colour</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-2.5 9h-1c-.55 0-1-.45-1-1s.45-1 1-1h1c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-1c-1.1 0-2 .9-2 2s.9 2 2 2h1c.55 0 1 .45 1 1s-.45 1-1 1h-1c-.28 0-.5.22-.5.5s.22.5.5.5h1c1.1 0 2-.9 2-2s-.9-2-2-2z"/></svg>
          </span>
          <input id="estimate-colour" type="text" name="vehicle_colour" placeholder="Colour (e.g. Silver)" class="px-4 py-3.5 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-0 text-base" autocomplete="off">
        </div>
        <label for="estimate-year" class="sr-only">Vehicle year</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg>
          </span>
          <input id="estimate-year" type="text" name="vehicle_year" placeholder="Year (e.g. 2018)" class="px-4 py-3.5 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-0 text-base" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" autocomplete="off">
        </div>
        <label for="estimate-fuel" class="sr-only">Fuel type</label>
        <div class="form-field-icon-wrap">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-1.1-.9-2-2-2h-.28c.31-.6 1.04-.97 1.76-.97l.01-.01zM12 10H6V5h6v5zm-2 2.5c-.83 0-1.5-.67-1.5-1.5S9.17 9.5 10 9.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
          </span>
          <select id="estimate-fuel" name="vehicle_fuel" class="px-4 py-3.5 text-zinc-100 focus:outline-none focus:ring-0 text-base" aria-label="Fuel type">
            <option value="">Fuel type</option>
            <option value="Petrol">Petrol</option>
            <option value="Diesel">Diesel</option>
            <option value="Hybrid">Hybrid</option>
            <option value="Electric">Electric</option>
          </select>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3">
        <label for="estimate-tyre-size" class="sr-only">Tyre size</label>
        <div class="form-field-icon-wrap col-span-1 sm:col-span-3">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L9 8H3v2h5l2 5-2 5h2l1-3h4l1 3h2l-2-5 2-5h5V8h-6l-3-6zm-1.5 11L12 7l1.5 6h-3z"/></svg>
          </span>
          <select id="estimate-tyre-size" name="tyre_size" class="px-4 py-3.5 text-zinc-100 focus:outline-none focus:ring-0 text-base" aria-label="Tyre size">
            <option value="">Tyre size (e.g. 205/55 R16)</option>
            <option value="Other">Other</option>
            <optgroup label="R14">
              <option value="155/65 R14">155/65 R14</option>
              <option value="165/70 R14">165/70 R14</option>
              <option value="175/65 R14">175/65 R14</option>
              <option value="185/60 R14">185/60 R14</option>
              <option value="195/70 R14">195/70 R14</option>
            </optgroup>
            <optgroup label="R15">
              <option value="155/80 R15">155/80 R15</option>
              <option value="165/65 R15">165/65 R15</option>
              <option value="175/65 R15">175/65 R15</option>
              <option value="185/55 R15">185/55 R15</option>
              <option value="185/60 R15">185/60 R15</option>
              <option value="195/55 R15">195/55 R15</option>
              <option value="195/65 R15">195/65 R15</option>
              <option value="205/55 R15">205/55 R15</option>
              <option value="205/65 R15">205/65 R15</option>
              <option value="215/60 R15">215/60 R15</option>
              <option value="225/45 R15">225/45 R15</option>
            </optgroup>
            <optgroup label="R16">
              <option value="185/55 R16">185/55 R16</option>
              <option value="195/55 R16">195/55 R16</option>
              <option value="205/55 R16">205/55 R16</option>
              <option value="205/60 R16">205/60 R16</option>
              <option value="215/55 R16">215/55 R16</option>
              <option value="215/60 R16">215/60 R16</option>
              <option value="225/55 R16">225/55 R16</option>
              <option value="225/60 R16">225/60 R16</option>
              <option value="235/55 R16">235/55 R16</option>
              <option value="245/45 R16">245/45 R16</option>
              <option value="255/55 R16">255/55 R16</option>
            </optgroup>
            <optgroup label="R17">
              <option value="205/45 R17">205/45 R17</option>
              <option value="205/50 R17">205/50 R17</option>
              <option value="215/45 R17">215/45 R17</option>
              <option value="215/55 R17">215/55 R17</option>
              <option value="225/45 R17">225/45 R17</option>
              <option value="225/55 R17">225/55 R17</option>
              <option value="235/45 R17">235/45 R17</option>
              <option value="235/55 R17">235/55 R17</option>
              <option value="245/45 R17">245/45 R17</option>
              <option value="255/45 R17">255/45 R17</option>
              <option value="265/40 R17">265/40 R17</option>
            </optgroup>
            <optgroup label="R18">
              <option value="215/40 R18">215/40 R18</option>
              <option value="225/40 R18">225/40 R18</option>
              <option value="225/45 R18">225/45 R18</option>
              <option value="235/40 R18">235/40 R18</option>
              <option value="235/50 R18">235/50 R18</option>
              <option value="245/40 R18">245/40 R18</option>
              <option value="245/45 R18">245/45 R18</option>
              <option value="255/40 R18">255/40 R18</option>
              <option value="265/40 R18">265/40 R18</option>
              <option value="275/40 R18">275/40 R18</option>
            </optgroup>
            <optgroup label="R19">
              <option value="225/35 R19">225/35 R19</option>
              <option value="235/35 R19">235/35 R19</option>
              <option value="245/35 R19">245/35 R19</option>
              <option value="245/40 R19">245/40 R19</option>
              <option value="255/35 R19">255/35 R19</option>
              <option value="255/40 R19">255/40 R19</option>
              <option value="265/35 R19">265/35 R19</option>
              <option value="275/35 R19">275/35 R19</option>
              <option value="285/35 R19">285/35 R19</option>
            </optgroup>
            <optgroup label="R20">
              <option value="245/30 R20">245/30 R20</option>
              <option value="255/35 R20">255/35 R20</option>
              <option value="265/35 R20">265/35 R20</option>
              <option value="275/30 R20">275/30 R20</option>
              <option value="275/35 R20">275/35 R20</option>
              <option value="285/30 R20">285/30 R20</option>
            </optgroup>
          </select>
        </div>
      </div>
      <div id="estimate-tyre-size-other-wrap" class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3 hidden">
        <label for="estimate-tyre-size-other" class="block text-sm font-medium text-zinc-300 mb-1 sm:col-span-3">Enter your tyre size</label>
        <div class="form-field-icon-wrap col-span-1 sm:col-span-3">
          <span class="form-field-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L9 8H3v2h5l2 5-2 5h2l1-3h4l1 3h2l-2-5 2-5h5V8h-6l-3-6zm-1.5 11L12 7l1.5 6h-3z"/></svg>
          </span>
          <input type="text" id="estimate-tyre-size-other" placeholder="e.g. 205/55 R16" class="w-full px-4 py-3.5 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-0 text-base" autocomplete="off">
        </div>
      </div>
      <p class="text-zinc-500 text-xs sm:text-sm mt-3"><a href="check-vehicle.html" class="text-safety hover:underline">Check vehicle details by registration</a></p>
    </div>

    <!-- Customer details -->
    <div class="rounded-xl border border-zinc-700 bg-zinc-800/50 p-6 mb-8">
      <h2 class="text-lg font-semibold text-white mb-4">Your details</h2>
      <div class="grid sm:grid-cols-2 gap-4">
        <div>
          <label for="estimate-name" class="block text-sm font-medium text-zinc-300 mb-1">Full name <span class="text-red-400">*</span></label>
          <input id="estimate-name" type="text" required placeholder="Your name" class="w-full px-4 py-3 rounded-lg bg-zinc-800 border-2 border-zinc-600 text-zinc-100 placeholder-zinc-500 focus:border-safety focus:outline-none">
        </div>
        <div>
          <label for="estimate-email" class="block text-sm font-medium text-zinc-300 mb-1">Email <span class="text-red-400">*</span></label>
          <input id="estimate-email" type="email" required placeholder="you@example.com" class="w-full px-4 py-3 rounded-lg bg-zinc-800 border-2 border-zinc-600 text-zinc-100 placeholder-zinc-500 focus:border-safety focus:outline-none">
        </div>
        <div class="sm:col-span-2">
          <label for="estimate-phone" class="block text-sm font-medium text-zinc-300 mb-1">Phone <span class="text-red-400">*</span></label>
          <div class="flex rounded-lg border-2 border-zinc-600 bg-zinc-800 overflow-hidden focus-within:border-safety">
            <span class="flex items-center px-3 py-3 bg-zinc-700/80 border-r border-zinc-600 text-zinc-300 text-sm shrink-0">+44</span>
            <input id="estimate-phone" type="tel" required inputmode="numeric" placeholder="7895 859505" class="flex-1 min-w-0 px-4 py-3 bg-transparent border-0 text-zinc-100 placeholder-zinc-500 focus:outline-none">
          </div>
        </div>
        <div class="sm:col-span-2">
          <label for="estimate-postcode" class="block text-sm font-medium text-zinc-300 mb-1">Location / Postcode <span class="text-red-400">*</span></label>
          <div class="flex flex-col gap-2">
            <div class="flex flex-wrap items-center gap-2">
              <input id="estimate-postcode" type="text" required placeholder="e.g. SW1A 1AA or street, area" autocomplete="postal-code" class="flex-1 min-w-[180px] px-4 py-3 rounded-lg bg-zinc-800 border-2 border-zinc-600 text-zinc-100 placeholder-zinc-500 focus:border-safety focus:outline-none">
              <button type="button" id="estimate-detect-location" class="inline-flex items-center gap-2 px-4 py-3 rounded-lg bg-zinc-700 border border-zinc-600 text-zinc-200 font-medium hover:bg-zinc-600 focus:outline-none focus:ring-2 focus:ring-safety shrink-0" aria-label="Use my current location">
                <svg class="w-5 h-5 text-safety shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                Use my location
              </button>
            </div>
            <span id="estimate-latlong" class="text-zinc-500 text-xs sm:text-sm whitespace-nowrap" aria-live="polite"></span>
          </div>
          <p class="text-zinc-500 text-xs mt-1">Where we should come for the fitting. We use this to send your location in the booking.</p>
        </div>
      </div>
    </div>

    <!-- Add services & selected -->
    <div class="rounded-xl border border-zinc-700 bg-zinc-800/50 p-6 mb-8">
      <h2 class="text-lg font-semibold text-white mb-2">Add services</h2>
      <p class="text-zinc-400 text-sm mb-4">Click <strong>Add</strong> for each service you need. Add the same service more than once for quantity.</p>
      <div id="estimate-available-services" class="grid sm:grid-cols-2 gap-2 mb-6">
        <!-- Filled by JS: service name, price, [Add] button -->
      </div>
      <h3 class="text-base font-semibold text-white mb-2">Selected services</h3>
      <div id="estimate-selected-lines" class="space-y-2 mb-4 min-h-[2rem]">
        <p id="estimate-no-services" class="text-zinc-500 text-sm">No services added yet. Add services above.</p>
      </div>
      <button type="button" id="add-custom-line" class="text-sm font-medium text-safety hover:text-[#e5c900] focus:outline-none focus:ring-2 focus:ring-safety rounded">
        + Add custom line (description + amount)
      </button>
    </div>

    <!-- Totals & Pay deposit -->
    <div class="rounded-xl border-2 border-safety bg-zinc-900 p-6 mb-8">
      <dl class="space-y-2 text-base">
        <div class="flex justify-between text-zinc-400">
          <dt>Estimate total</dt>
          <dd id="estimate-total" class="font-semibold text-white">£0.00</dd>
        </div>
        <div class="flex justify-between text-safety font-semibold">
          <dt>Deposit (20%)</dt>
          <dd id="estimate-deposit">£0.00</dd>
        </div>
        <p class="text-zinc-500 text-sm pt-2">Pay the deposit now to confirm your booking. Remaining balance due on completion.</p>
      </dl>
      <p id="estimate-status" class="text-sm mt-4 hidden" aria-live="polite"></p>
      <button type="button" id="pay-deposit-btn" disabled class="w-full mt-4 px-6 py-3.5 bg-safety text-zinc-900 font-bold rounded-lg hover:bg-[#e5c900] focus:outline-none focus:ring-2 focus:ring-safety focus:ring-offset-2 focus:ring-offset-zinc-900 transition-colors tap-highlight-none disabled:opacity-50 disabled:pointer-events-none">
        Pay 20% deposit
      </button>
    </div>
  </main>

  <footer class="bg-zinc-900 border-t border-zinc-700 py-10 sm:py-12 mt-auto">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6">
        <div>
          <a href="index.html" class="inline-block">
            <img src="https://no5tyreandmot.co.uk/wp-content/uploads/2026/02/Car-Service-Logo-with-Wrench-and-Tyre-Icon-370-x-105-px.png" alt="No 5 Tyre and MOT logo" class="h-8 w-auto object-contain" loading="lazy">
          </a>
          <p class="font-bold text-white text-lg mt-2">Mobile Tyres</p>
          <p class="text-zinc-400 text-sm mt-1">Emergency mobile tyre fitting – we come to you.</p>
        </div>
        <div class="flex flex-wrap items-center gap-4">
          <a href="tel:07895859505" data-track="call" class="inline-flex items-center gap-2 text-safety font-semibold hover:text-[#e5c900] transition-colors tap-highlight-none">07895 859505</a>
          <a href="https://wa.me/447895859505" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-zinc-400 font-semibold hover:text-zinc-200 transition-colors" aria-label="WhatsApp">WhatsApp</a>
        </div>
      </div>
      <div class="mt-8 pt-6 border-t border-zinc-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 text-sm text-zinc-500">
        <p>© <span id="footer-year"></span> Mobile Tyres. All rights reserved.</p>
        <a href="https://www.cybercina.co.uk" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-zinc-500 hover:text-zinc-300 transition-colors" aria-label="Site developed by Cybercina">
          <span>Site developed by</span>
          <img src="https://cybercina.co.uk/wp-content/uploads/2025/10/cropped-2.png" alt="Cybercina web design" class="h-6 w-auto object-contain" loading="lazy">
        </a>
      </div>
    </div>
  </footer>

  <div class="h-16 sm:hidden" aria-hidden="true"></div>

  <script>
    (function () {
      var CONFIG = { laborPrice: 50, prices: { punctureRepair: 25, pricePerTyre: 15, priceBalance: 12, lockingWheelNutRemoval: 30, jumpStart: 35, batteryReplacement: 45 } };
      var DEPOSIT_PERCENT = 20;
      var totalEl = document.getElementById('estimate-total');
      var depositEl = document.getElementById('estimate-deposit');
      var payBtn = document.getElementById('pay-deposit-btn');
      var statusEl = document.getElementById('estimate-status');
      var availableEl = document.getElementById('estimate-available-services');
      var selectedEl = document.getElementById('estimate-selected-lines');
      var noServicesEl = document.getElementById('estimate-no-services');

      var selectedLines = [];
      var customLines = [];

      var serviceDefs = [
        { id: 'labor', label: 'Labour (call-out)', key: 'laborPrice' },
        { id: 'puncture', label: 'Puncture repair', key: 'punctureRepair' },
        { id: 'tyre', label: 'Tyre fitting (per tyre)', key: 'pricePerTyre' },
        { id: 'balance', label: 'Wheel balancing (per wheel)', key: 'priceBalance' },
        { id: 'locking', label: 'Locking wheel nut removal', key: 'lockingWheelNutRemoval' },
        { id: 'jump', label: 'Jump start', key: 'jumpStart' },
        { id: 'battery', label: 'Battery replacement', key: 'batteryReplacement' }
      ];

      function loadConfig() {
        return fetch('dynamic.json').then(function (r) { return r.ok ? r.json() : {}; }).then(function (data) {
          if (data.laborPrice != null) CONFIG.laborPrice = Number(data.laborPrice);
          if (data.prices && typeof data.prices === 'object') {
            Object.keys(data.prices).forEach(function (k) { CONFIG.prices[k] = Number(data.prices[k]) || 0; });
          }
          return CONFIG;
        }).catch(function () { return CONFIG; });
      }

      function formatPounds(n) { return '£' + (n || 0).toFixed(2); }

      function escapeHtml(str) {
        if (str == null) return '';
        var s = String(str);
        return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
      }

      function getPrice(key) {
        return key === 'laborPrice' ? CONFIG.laborPrice : (CONFIG.prices[key] || 0);
      }

      function addService(id) {
        var def = serviceDefs.find(function (d) { return d.id === id; });
        if (!def) return;
        var price = getPrice(def.key);
        var existing = selectedLines.find(function (l) { return l.id === id && !l.custom; });
        if (existing) {
          existing.qty += 1;
        } else {
          selectedLines.push({ id: def.id, label: def.label, key: def.key, price: price, qty: 1, custom: false });
        }
        renderSelected();
        updateTotals();
      }

      function removeSelectedIndex(idx) {
        selectedLines.splice(idx, 1);
        renderSelected();
        updateTotals();
      }

      function renderAvailable() {
        if (!availableEl) return;
        availableEl.innerHTML = '';
        serviceDefs.forEach(function (def) {
          var price = getPrice(def.key);
          var div = document.createElement('div');
          div.className = 'flex flex-wrap items-center justify-between gap-2 px-3 py-2 rounded-lg bg-zinc-800 border border-zinc-600';
          div.innerHTML =
            '<span class="text-zinc-200 text-sm">' + escapeHtml(def.label || def.id) + '</span>' +
            '<span class="text-safety font-medium tabular-nums">' + formatPounds(price) + '</span>' +
            '<button type="button" class="estimate-add-service px-3 py-1.5 rounded bg-safety text-zinc-900 font-semibold text-sm hover:bg-[#e5c900] focus:outline-none focus:ring-2 focus:ring-safety" data-id="' + escapeHtml(def.id) + '">Add</button>';
          availableEl.appendChild(div);
        });
        availableEl.querySelectorAll('.estimate-add-service').forEach(function (btn) {
          btn.addEventListener('click', function () { addService(btn.getAttribute('data-id')); });
        });
      }

      function renderSelected() {
        if (!selectedEl || !noServicesEl) return;
        noServicesEl.classList.toggle('hidden', selectedLines.length + customLines.length > 0);
        var existingRows = selectedEl.querySelectorAll('.estimate-selected-row');
        existingRows.forEach(function (r) { r.remove(); });
        selectedLines.forEach(function (line, idx) {
          var row = document.createElement('div');
          row.className = 'estimate-selected-row flex flex-wrap items-center gap-2 py-2 border-b border-zinc-600 last:border-0';
          var lineTotal = line.price * (line.qty || 1);
          row.innerHTML =
            '<span class="flex-1 min-w-[120px] text-zinc-200 text-sm">' + escapeHtml(line.label || line.id) + (line.qty > 1 ? ' ×' + line.qty : '') + '</span>' +
            '<span class="text-safety font-medium tabular-nums">' + formatPounds(line.price) + '</span>' +
            '<span class="font-semibold text-white tabular-nums w-16 text-right">' + formatPounds(lineTotal) + '</span>' +
            '<button type="button" class="estimate-remove-selected text-zinc-500 hover:text-red-400 p-1" data-idx="' + idx + '" aria-label="Remove">×</button>';
          selectedEl.appendChild(row);
        });
        customLines.forEach(function (line, idx) {
          var row = document.createElement('div');
          row.className = 'estimate-selected-row flex flex-wrap items-center gap-2 py-2 border-b border-zinc-600 last:border-0';
          var amt = Number(line.amount) || 0;
          row.innerHTML =
            '<input type="text" placeholder="Description" class="custom-desc flex-1 min-w-[100px] px-2 py-1 rounded bg-zinc-700 border border-zinc-600 text-zinc-100 text-sm" value="' + escapeHtml(line.desc || '') + '">' +
            '<input type="number" min="0" step="0.01" placeholder="£" class="custom-amount w-16 px-2 py-1 rounded bg-zinc-700 border border-zinc-600 text-zinc-100 text-sm" value="' + escapeHtml(line.amount != null ? String(line.amount) : '') + '">' +
            '<span class="estimate-custom-total font-semibold text-white tabular-nums w-16 text-right">' + formatPounds(amt) + '</span>' +
            '<button type="button" class="estimate-remove-custom text-zinc-500 hover:text-red-400 p-1" data-idx="' + idx + '" aria-label="Remove">×</button>';
          selectedEl.appendChild(row);
        });
        selectedEl.querySelectorAll('.estimate-remove-selected').forEach(function (btn) {
          btn.addEventListener('click', function () {
            var idx = parseInt(btn.getAttribute('data-idx'), 10);
            if (!isNaN(idx)) removeSelectedIndex(idx);
          });
        });
        selectedEl.querySelectorAll('.estimate-remove-custom').forEach(function (btn) {
          btn.addEventListener('click', function () {
            var idx = parseInt(btn.getAttribute('data-idx'), 10);
            if (!isNaN(idx)) { customLines.splice(idx, 1); renderSelected(); updateTotals(); }
          });
        });
        selectedEl.querySelectorAll('.custom-desc, .custom-amount').forEach(function (input) {
          input.addEventListener('input', function () {
            var row = input.closest('.estimate-selected-row');
            var customRows = selectedEl.querySelectorAll('.estimate-selected-row');
            var idx = -1;
            for (var i = 0; i < customRows.length; i++) {
              if (customRows[i] === row) { idx = i - selectedLines.length; break; }
            }
            if (idx >= 0 && customLines[idx]) {
              if (input.classList.contains('custom-desc')) customLines[idx].desc = input.value;
              else customLines[idx].amount = parseFloat(input.value) || 0;
              var totalSpan = row.querySelector('.estimate-custom-total');
              if (totalSpan) totalSpan.textContent = formatPounds(customLines[idx].amount || 0);
              updateTotals();
            }
          });
        });
      }

      function updateTotals() {
        var total = 0;
        selectedLines.forEach(function (line) {
          total += line.price * (line.qty || 1);
        });
        customLines.forEach(function (line) {
          total += Number(line.amount) || 0;
        });
        var deposit = total * (DEPOSIT_PERCENT / 100);
        totalEl.textContent = formatPounds(total);
        depositEl.textContent = formatPounds(deposit);
        payBtn.disabled = total <= 0 || deposit < 0.5;
      }

      document.getElementById('add-custom-line').addEventListener('click', function () {
        customLines.push({ desc: '', amount: 0 });
        renderSelected();
      });

      var vrmInput = document.getElementById('estimate-vrm');
      if (vrmInput) {
        vrmInput.addEventListener('input', function () {
          var raw = this.value.replace(/[^A-Za-z0-9 ]/g, '').replace(/\s+/g, ' ').slice(0, 8);
          this.value = raw.toUpperCase();
        });
      }

      (function () {
        var select = document.getElementById('estimate-tyre-size');
        var wrap = document.getElementById('estimate-tyre-size-other-wrap');
        if (!select || !wrap) return;
        function toggle() {
          if (select.value === 'Other') {
            wrap.classList.remove('hidden');
            var other = document.getElementById('estimate-tyre-size-other');
            if (other) other.focus();
          } else {
            wrap.classList.add('hidden');
          }
        }
        select.addEventListener('change', toggle);
        toggle();
      })();

      var locationLat = '';
      var locationLng = '';
      var geocodeTimer = null;
      function geocodePostcode() {
        var postcodeEl = document.getElementById('estimate-postcode');
        var latlongEl = document.getElementById('estimate-latlong');
        var q = (postcodeEl && postcodeEl.value) ? postcodeEl.value.trim() : '';
        if (!q || q.length < 3) {
          locationLat = '';
          locationLng = '';
          if (latlongEl) latlongEl.textContent = '';
          return;
        }
        var url = 'https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(q) + '&format=json&limit=1&countrycodes=gb';
        fetch(url, { headers: { 'Accept': 'application/json', 'User-Agent': 'MobileTyresEstimate/1.0 (no5tyreandmot.co.uk)' } })
          .then(function (r) { return r.json(); })
          .then(function (arr) {
            if (arr && arr[0] && typeof arr[0].lat === 'string' && typeof arr[0].lon === 'string') {
              locationLat = arr[0].lat;
              locationLng = arr[0].lon;
              if (latlongEl) latlongEl.textContent = arr[0].lat + ', ' + arr[0].lon;
            } else {
              locationLat = '';
              locationLng = '';
              if (latlongEl) latlongEl.textContent = '';
            }
          })
          .catch(function () {
            locationLat = '';
            locationLng = '';
            if (latlongEl) latlongEl.textContent = '';
          });
      }
      (function () {
        var postcodeEl = document.getElementById('estimate-postcode');
        if (!postcodeEl) return;
        postcodeEl.addEventListener('input', function () {
          if (geocodeTimer) clearTimeout(geocodeTimer);
          geocodeTimer = setTimeout(geocodePostcode, 600);
        });
        postcodeEl.addEventListener('blur', function () {
          if (geocodeTimer) clearTimeout(geocodeTimer);
          geocodePostcode();
        });
      })();

      var detectBtn = document.getElementById('estimate-detect-location');
      var latlongEl = document.getElementById('estimate-latlong');
      function setLatLongDisplay(text, isError) {
        if (!latlongEl) return;
        latlongEl.textContent = text || '';
        latlongEl.className = 'text-xs sm:text-sm whitespace-nowrap ' + (isError ? 'text-red-400' : 'text-zinc-500');
      }
      function reverseGeocode(lat, lon) {
        var url = 'https://nominatim.openstreetmap.org/reverse?lat=' + encodeURIComponent(lat) + '&lon=' + encodeURIComponent(lon) + '&format=json&addressdetails=1';
        fetch(url, { headers: { 'Accept': 'application/json', 'User-Agent': 'MobileTyresEstimate/1.0 (no5tyreandmot.co.uk)' } })
          .then(function (r) { return r.json(); })
          .then(function (data) {
            var postcodeEl = document.getElementById('estimate-postcode');
            var addr = data && data.address;
            var display = data && data.display_name;
            if (addr && (addr.postcode || addr.suburb || addr.city_district || addr.city || addr.town)) {
              var parts = [addr.postcode, addr.road, addr.suburb, addr.city_district, addr.city, addr.town].filter(Boolean);
              if (postcodeEl) postcodeEl.value = parts.slice(0, 3).join(', ') || display || (lat + ', ' + lon);
            } else if (postcodeEl && display) {
              postcodeEl.value = display;
            } else if (postcodeEl) {
              postcodeEl.value = lat + ', ' + lon;
            }
            setLatLongDisplay(lat + ', ' + lon, false);
          })
          .catch(function () {
            var postcodeEl = document.getElementById('estimate-postcode');
            if (postcodeEl) postcodeEl.value = lat + ', ' + lon;
            setLatLongDisplay(lat + ', ' + lon, false);
          });
      }
      if (detectBtn) {
        detectBtn.addEventListener('click', function () {
          if (!navigator.geolocation) {
            setLatLongDisplay('Location not supported by your browser.', true);
            return;
          }
          setLatLongDisplay('Detecting location…', false);
          detectBtn.disabled = true;
          navigator.geolocation.getCurrentPosition(
            function (pos) {
              detectBtn.disabled = false;
              var lat = String(pos.coords.latitude);
              var lng = String(pos.coords.longitude);
              locationLat = lat;
              locationLng = lng;
              reverseGeocode(lat, lng);
            },
            function (err) {
              detectBtn.disabled = false;
              var msg = 'Location unavailable.';
              if (err.code === 1) msg = 'Location permission denied. Enter postcode manually.';
              else if (err.code === 2) msg = 'Position unavailable. Try again or enter postcode.';
              else if (err.code === 3) msg = 'Request timed out. Try again or enter postcode.';
              setLatLongDisplay(msg, true);
            },
            { enableHighAccuracy: true, timeout: 10000, maximumAge: 300000 }
          );
        });
      }

      payBtn.addEventListener('click', function () {
        var total = parseFloat(totalEl.textContent.replace(/[^0-9.]/g, '')) || 0;
        var deposit = total * (DEPOSIT_PERCENT / 100);
        if (deposit < 0.5) return;
        var amountPence = Math.round(deposit * 100);
        var name = (document.getElementById('estimate-name') && document.getElementById('estimate-name').value) || '';
        var email = (document.getElementById('estimate-email') && document.getElementById('estimate-email').value) || '';
        var phone = (document.getElementById('estimate-phone') && document.getElementById('estimate-phone').value) || '';
        var postcode = (document.getElementById('estimate-postcode') && document.getElementById('estimate-postcode').value) || '';
        if (!name.trim() || !email.trim() || !phone.trim()) {
          if (statusEl) { statusEl.textContent = 'Please fill in your name, email and phone.'; statusEl.className = 'text-sm mt-4 text-red-400'; statusEl.classList.remove('hidden'); }
          return;
        }
        if (!postcode.trim()) {
          if (statusEl) { statusEl.textContent = 'Please enter your location or postcode.'; statusEl.className = 'text-sm mt-4 text-red-400'; statusEl.classList.remove('hidden'); }
          return;
        }
        payBtn.disabled = true;
        if (statusEl) { statusEl.textContent = 'Redirecting to secure payment…'; statusEl.className = 'text-sm mt-4 text-safety'; statusEl.classList.remove('hidden'); }
        var baseUrl = window.location.origin + window.location.pathname.replace(/[^/]+$/, '');
        var payload = {
          amount_pence: amountPence,
          customer_email: email.trim(),
          customer_name: name.trim(),
          customer_phone: phone.replace(/\D/g, '').replace(/^0+/, ''),
          estimate_total: total,
          description: 'Emergency Tyre Deposit',
          customer_postcode: postcode.trim()
        };
        if (locationLat && locationLng) {
          payload.customer_lat = locationLat;
          payload.customer_lng = locationLng;
        }
        var vrm = (document.getElementById('estimate-vrm') && document.getElementById('estimate-vrm').value || '').trim().replace(/\s+/g, '').toUpperCase();
        var carMake = (document.getElementById('estimate-car-make') && document.getElementById('estimate-car-make').value || '').trim();
        var carModel = (document.getElementById('estimate-car-model') && document.getElementById('estimate-car-model').value || '').trim();
        var tyreSizeSelect = document.getElementById('estimate-tyre-size');
        var tyreSizeOther = document.getElementById('estimate-tyre-size-other');
        var tyreSize = (tyreSizeSelect && tyreSizeSelect.value === 'Other' && tyreSizeOther) ? (tyreSizeOther.value || '').trim() : ((tyreSizeSelect && tyreSizeSelect.value) || '');
        var wheelsEl = document.getElementById('estimate-wheels');
        var wheels = (wheelsEl && wheelsEl.value) ? wheelsEl.value : '';
        var colourEl = document.getElementById('estimate-colour');
        var colour = (colourEl && colourEl.value) ? colourEl.value.trim() : '';
        var yearEl = document.getElementById('estimate-year');
        var year = (yearEl && yearEl.value) ? yearEl.value.trim() : '';
        var fuelEl = document.getElementById('estimate-fuel');
        var fuel = (fuelEl && fuelEl.value) ? fuelEl.value : '';
        if (vrm) payload.vehicle_vrm = vrm.substring(0, 20);
        if (carMake) payload.vehicle_make = carMake.substring(0, 200);
        if (carModel) payload.vehicle_model = carModel.substring(0, 200);
        if (colour) payload.vehicle_colour = colour.substring(0, 50);
        if (year) payload.vehicle_year = year.substring(0, 4);
        if (fuel) payload.vehicle_fuel = fuel.substring(0, 20);
        if (tyreSize) payload.vehicle_tyre_size = tyreSize.substring(0, 50);
        if (wheels) payload.vehicle_wheels = wheels;
        fetch('create-checkout-session.php', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        })
          .then(function (r) {
            return r.text().then(function (text) {
              var data = null;
              try { data = text ? JSON.parse(text) : null; } catch (e) {
                data = { error: (text && text.length < 500 && !text.trim().startsWith('<')) ? text : 'Server error. Please call us on 07895 859505.' };
              }
              return { ok: r.ok, data: data, status: r.status };
            });
          })
          .then(function (result) {
            if (result.ok && result.data && result.data.url) {
              window.location.href = result.data.url;
              return;
            }
            payBtn.disabled = false;
            if (statusEl) {
              var errMsg = (result.data && result.data.error) ? result.data.error : 'Unable to start payment. Please try again or call us.';
              if (result.status === 500 && result.data && result.data.error && result.data.error.length > 200) {
                errMsg = 'Server error. Please call us on 07895 859505.';
              }
              statusEl.textContent = errMsg;
              statusEl.className = 'text-sm mt-4 text-red-400';
              statusEl.classList.remove('hidden');
            }
          })
          .catch(function (err) {
            payBtn.disabled = false;
            if (statusEl) {
              statusEl.textContent = 'Network error. Check your connection, or call us on 07895 859505.';
              statusEl.className = 'text-sm mt-4 text-red-400';
              statusEl.classList.remove('hidden');
            }
          });
      });

      loadConfig().then(function () { renderAvailable(); renderSelected(); });

      if (window.location.search.indexOf('canceled=1') !== -1) {
        var m = document.getElementById('canceled-msg');
        if (m) { m.classList.remove('hidden'); }
      }
    })();
  </script>
  <script>document.getElementById('footer-year') && (document.getElementById('footer-year').textContent = new Date().getFullYear());</script>
  <script>
    (function(){
      function fadeIn(){ document.body.classList.add('page-loaded'); }
      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fadeIn); else fadeIn();
      document.addEventListener('click', function(e){
        var a = e.target.closest('a[href]');
        if (!a || a.target === '_blank' || a.getAttribute('href').startsWith('tel:') || a.getAttribute('href').startsWith('mailto:') || a.getAttribute('href').startsWith('#')) return;
        try { if (a.hostname !== window.location.hostname) return; } catch(_) { return; }
        if (a.pathname === window.location.pathname && !a.getAttribute('href').replace(/^#.*/, '')) return;
        e.preventDefault();
        document.body.classList.add('page-leaving');
        setTimeout(function(){ window.location.href = a.href; }, 220);
      });
    })();
  </script>
  <script>
    (function(){
      var toggle = document.getElementById('theme-toggle');
      if (!toggle) return;
      function applyTheme(light) {
        var root = document.documentElement;
        if (light) { root.setAttribute('data-theme', 'light'); localStorage.setItem('theme', 'light'); }
        else { root.removeAttribute('data-theme'); localStorage.setItem('theme', 'dark'); }
        var meta = document.querySelector('meta[name="theme-color"]');
        if (meta) meta.setAttribute('content', light ? '#f4f4f5' : '#18181b');
        if (toggle) {
          toggle.querySelector('.theme-icon-dark').classList.toggle('hidden', light);
          toggle.querySelector('.theme-icon-light').classList.toggle('hidden', !light);
          toggle.setAttribute('aria-label', light ? 'Switch to dark theme' : 'Switch to light theme');
        }
      }
      toggle.addEventListener('click', function() { applyTheme(document.documentElement.getAttribute('data-theme') !== 'light'); });
      var isLight = document.documentElement.getAttribute('data-theme') === 'light';
      toggle.querySelector('.theme-icon-dark').classList.toggle('hidden', isLight);
      toggle.querySelector('.theme-icon-light').classList.toggle('hidden', !light);
      toggle.setAttribute('aria-label', isLight ? 'Switch to dark theme' : 'Switch to light theme');
    })();
  </script>
  <script>
    (function(){
      var toggle = document.getElementById('nav-mobile-toggle');
      var panel = document.getElementById('nav-mobile-panel');
      if (!toggle || !panel) return;
      function open() { document.body.classList.add('nav-open'); toggle.setAttribute('aria-expanded', 'true'); panel.setAttribute('aria-hidden', 'false'); }
      function close() { document.body.classList.remove('nav-open'); toggle.setAttribute('aria-expanded', 'false'); panel.setAttribute('aria-hidden', 'true'); }
      toggle.addEventListener('click', function() { if (document.body.classList.contains('nav-open')) close(); else open(); });
      panel.querySelectorAll('.nav-mobile-link').forEach(function(link) { link.addEventListener('click', close); });
      document.addEventListener('keydown', function(e) { if (e.key === 'Escape') close(); });
    })();
  </script>
</body>
</html>
